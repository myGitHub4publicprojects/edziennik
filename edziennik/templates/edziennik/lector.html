{% extends "edziennik/base.html" %}
{% load static %}
{% block content %}
<section>
    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
    <h1>Lektor: {{ lector.user.get_full_name }}</h1>
<a href="{% url 'edziennik:lector_update' lector.id %}" class="btn btn-sm btn-outline-primary">edytuj</a>
    <div class="row">
        <div class="col-md-6">
            <h4 class="text-center">Obecne grupy:</h4>
            <div class="list-group">
            {% for group in lectors_groups %}
            <a href="{% url 'edziennik:group' group.id %}" class="list-group-item list-group-item-action">
            {{ group.name }}</a> 
            {% empty %}
            <p>Nie ma żadnych grup</p>
            {% endfor %}
            </div>
        </div>
        <div class="col-md-6 text-center">
            <div class="btn btn-outline-success btn-sm mb-1 d-block" 
            id="showAddGroup">dodaj grupy</div>
            <div id="collapseNewGroups" class="d-none">
                <p>zaznacz grupy do dodania:</p>
                <form action="" method="POST" id="selectWithSearch">{% csrf_token %}
                    <input type="text" placeholder="wyszukaj grupy">
                    <select name="newGroups" multiple class="select form-control input-sm">
                        {% for g in groups %}
                        <option value="{{ g.id }}">{{ g.name }}</option>
                        {% endfor %}
                    </select>
                    <input type="submit" value="Zatwierdź">
                </form>
            </div>
            
            
            
            
            <hr>





            <div class="btn btn-outline-danger btn-sm mb-1 d-block" id="showDelGroup">usuń grupy</div>
            <div id="collapseDelGroups" class="d-none">
                <p>zaznacz grupy do usunięcia:</p>
                <form action="" method="POST" class="d-inline-block">{% csrf_token %}
                    <select name="delGroups" multiple class=" select form-control input-sm">
                        {% for g in lectors_groups %}
                        <option value="{{ g.id }}">{{ g.name }}</option>
                        {% endfor %}
                    </select>
                    <input type="submit" value="Zatwierdź">
                </form>
            </div>



        </div>

    </div>
    <hr>

    <h2>Godziny</h2>
    <table class="table table-striped">
        <thead>
            <th>Miesiąc</th>
            <th>liczba godzin</th>
        </thead>
        <tbody>
            {% for i in hours_in_month_list %}
            <tr>
                <td>{{ i.0 }}</td>
                <td>{{ i.1 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p>Łączna liczba godzin w tym roku szkolnym 
        <small>(wrzesień - sierpień)</small>: {{ total_hours_year }}</p>

    <hr>
    <p>Username: {{ lector.user.username }}</p>
    <p>Hasło domyślne: {{ lector.initial_password }}</p>
    
</section>

{% endblock content %}

{% block javascript %}
<script src="{% static 'scripts/selectWithSearch.js' %}"></script>
<script>

    const showAddGroup = document.getElementById('showAddGroup');
    const collapseNewGroups = document.getElementById('collapseNewGroups');
    showAddGroup.addEventListener('click', function () {
        if (collapseNewGroups.className == 'd-inline-block') {
            collapseNewGroups.className = 'd-none';
        }
        else {
            collapseNewGroups.className = 'd-inline-block';
        }
    })

    const showDelGroup = document.getElementById('showDelGroup');
    const collapseDelGroups = document.getElementById('collapseDelGroups');
    showDelGroup.addEventListener('click', function () {
        if (collapseDelGroups.className == 'd-inline-block') {
            collapseDelGroups.className = 'd-none';
        }
        else {
            collapseDelGroups.className = 'd-inline-block';
        }
    })
</script>
{% endblock javascript %}