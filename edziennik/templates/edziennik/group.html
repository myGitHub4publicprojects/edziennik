{% extends "edziennik/base.html" %}
{% block content %}

<div class="row">
    <div class="col-sm-3">Nazwa grupy: <b>{{ group.name }}</b></div>
    <div class="col-sm-9">
    {% if request.user.is_superuser %}
        Lektor prowadzący:
        {% if lector %}
        <a href="{% url 'edziennik:lector' lector.id %}">
            <b>{{ lector.user.get_full_name }}</b>
        </a>
        {% else %}
        nie przydzielono lekora
        {% endif %}
        
        <button class="btn btn-primary btn-sm mx-3 mb-1" type="button" 
        id="showLectorChange">zmień lektora</button>
        <div id="collapseNewLector" class="d-none">
        nowy lektor:
        <form action="" method="POST" class="d-inline-block">{% csrf_token %}
            <select name="newLectorId">
                {% for l in lectors %}
                <option value="{{ l.id }}">{{ l.user.get_full_name }}</option>
                {% endfor %}
            </select>
            <input type="submit" value="Zatwierdź">
        </form>
        </div>
    {% endif %}
    </div>

</div>

<section>
    
    {% if request.user.is_superuser %}
    <a href="{% url 'edziennik:add_quizlet' group.id %}">
        <button class="btn blue-btn">Dodaj quizlet</button>
    </a>
    {% endif %}

    <a href="{% url 'edziennik:group_check' group.id %}">
        <button class="btn blue-btn">Sprawdź obecność</button>
    </a>
    <a href="{% url 'edziennik:group_grades' group.id %}">
        <button class="btn blue-btn">Dodaj oceny</button>
    </a>
    <a href="{% url 'edziennik:attendance_by_group' group.id %}">
        <button class="btn blue-btn">Pokaż frekwencje</button>
    </a>
    <a href="{% url 'edziennik:show_group_grades' group.id %}">
        <button class="btn blue-btn">Pokaż oceny</button>
    </a>
    <a href="{% url 'edziennik:add_homework' group.id %}">
        <button class="btn blue-btn">Homework</button>
    </a>
</section>
<hr>
<section>
    <p>Uczniowie:
        <ul class="list-unstyled">
            {% for s in students %}
                <li>
                    <a href="{% url 'edziennik:student' s.id %}">{{ s }}</a>
                </li>
            {% endfor %}
        </ul>
    </p>
</section>
<hr>
<section>
    <p>Zadania domowe:</p>
    <table class="table">
        <thead>
            <td>Data</td>
            <td>Treść</td>
        </thead>
        {% for h in homeworks %}
        <tr>
            <td>{{ h.classdate.date_of_class|date:"d.m.Y" }}</td>
            <td>{{ h.message }}</td>

        </tr>
        {% endfor %}
    </table>
</section>

<script>
const showLectorChange = document.getElementById('showLectorChange');
const collapseNewLector = document.getElementById('collapseNewLector');
showLectorChange.addEventListener('click', function(){
    if (collapseNewLector.className == 'd-inline-block'){
        collapseNewLector.className = 'd-none';
    }
    else {
        collapseNewLector.className = 'd-inline-block';
    }
})
</script>
{% endblock content %}